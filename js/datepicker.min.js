!function(){var e=null;this.DatePicker=function(e){var t=this;this.config=e,this.days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.fullDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.fullMonths=["January","February","March","April","May","June","July","August","September","October","November","December"],this.currentInfo={date:null,month:null,year:null},this.forSetDate=new Date,this.maxYear=this.forSetDate.getFullYear()+100,this.minYear=this.forSetDate.getFullYear()-100,this.minMaxMonth=this.forSetDate.getMonth(),this.dateArray=[],this.isLeftArrowEnabled=!0,this.isRightArrowEnabled=!0,this.displayView={day:!0,month:!1,year:!1},this.config.target.addEventListener("click",function(){var e=t.getDtpShowStatus(t.config.target);e?(t.config.target.blur(),t.createHtmlContent()):t.closeDatePicker(t)})},DatePicker.prototype.getDtpShowStatus=function(t){for(var r=!0,a=document.getElementsByClassName("datepicker_parent_container"),n=0;n<a.length;n++)a[n].remove(),r=!1;return e!=t.id&&(r=!0,e=t.id),r},DatePicker.prototype.createHtmlContent=function(){this.parentElement=this.createElementDynamic("div",{"class":"datepicker_parent_container"}),this.isValidDate(this.config.target.value);var e=this.createDatePickerHeader(),t=this.createDateTable();this.parentElement.appendChild(e),this.parentElement.appendChild(t),this.positionDatePickerStyle(this.parentElement),document.body.appendChild(this.parentElement),this.onClickDatePicker(),this.validateMinMaxDate()},DatePicker.prototype.createDatePickerHeader=function(){var e=this,t=this.createElementDynamic("div",{"class":"dtp_datepicker_header_class"}),r=this.createElementDynamic("div",{"class":"dtp_datepicker_headerleft"}),a=this.createElementDynamic("div",{id:"dtp_container_title","class":"dtp_datepicker_headercenter"});this.setHeaderTitle(a);var n=this.createElementDynamic("div",{"class":"dtp_datepicker_headerright"}),i=this.createElementDynamic("span",{id:"dtp_header_left_arrow","class":"dtp_header_leftarrow"});i.addEventListener("click",function(t){e.isLeftArrowEnabled&&e.handlingArrowClick(!1)}),i.appendChild(this.createTextNodeDynamic("<"));var o=this.createElementDynamic("span",{id:"dtp_header_right_arrow","class":"dtp_header_rightarrow"});return o.addEventListener("click",function(t){e.isRightArrowEnabled&&e.handlingArrowClick(!0)}),o.appendChild(this.createTextNodeDynamic(">")),r.appendChild(i),n.appendChild(o),t.appendChild(r),t.appendChild(a),t.appendChild(n),t},DatePicker.prototype.handlingArrowClick=function(e){this.displayView.day?this.updateDatePicker(e):this.displayView.month?(this.nextPrevYear(e,1),this.setHeaderTitle(),this.buildMonthViewBody()):(this.nextPrevYear(e,16),this.setHeaderTitle(),this.buildYearViewContent()),this.validateMinMaxDate()},DatePicker.prototype.nextPrevYear=function(e,t){e?this.updateCurrentInfo({year:this.currentInfo.year+t}):this.updateCurrentInfo({year:this.currentInfo.year-t})},DatePicker.prototype.createDateTable=function(){var e=this.createElementDynamic("table"),t=this.createElementDynamic("thead"),r=this.createHeader(),a=this.createDatePickerBody();return t.appendChild(r),e.appendChild(t),e.appendChild(a),e},DatePicker.prototype.createHeader=function(){for(var e=this,t=this.createElementDynamic("tr"),r=this.days,a=r.length,n=0;a>n;n++){var i=e.createTextNodeDynamic(r[n]),o=e.createElementDynamic("td");o.appendChild(i),t.appendChild(o)}return t},DatePicker.prototype.createDatePickerBody=function(){for(var e=this,t=this.getCurrentMonthTotalDays(this.currentInfo.year,this.currentInfo.month),r=(this.buildCurrentMonthArray(t),this.createElementDynamic("tbody",{id:"dtp_tablebody"})),a=this.dateArray.length,n=this.createElementDynamic("tr"),i=0;a>i;i++){var o=e.dateArray[i],s=e.createElementDynamic("td");s.className=o.clsName;var d=e.createTextNodeDynamic(o.value);s.appendChild(d),0!=i&&i%7==0&&(r.appendChild(n),n=e.createElementDynamic("tr")),n.appendChild(s)}return r.appendChild(n),r},DatePicker.prototype.buildCurrentMonthArray=function(e){this.dateArray=[],this.setDateMonthYear(this.currentInfo.year,this.currentInfo.month,1);var t=this.currentDay();this.setDateMonthYear(this.currentInfo.year,this.currentInfo.month,e);var r=this.currentDay();if(t>0){this.setDateMonthYear(this.currentInfo.year,this.currentInfo.month,1),this.subtractDays(t);var a=this.currentDate(),n=this.getCurrentMonthTotalDays(this.currentYear(),this.currentMonth());this.addDays(t)}if(6>r){this.setDateMonthYear(this.currentInfo.year,this.currentInfo.month,e);var i=1,o=6-r}this.loopByIndex(a,n,"not-current-month"),this.loopByIndex(1,e,"dtp-current-month"),this.loopByIndex(i,o,"not-current-month")},DatePicker.prototype.loopByIndex=function(e,t,r){var a=this;for(e;t>=e;e++){var n={value:e,clsName:r};"dtp-current-month"==r&&a.currentInfo.date==e&&a.currentInfo.month==a.selectedInfo.month&&a.currentInfo.year==a.selectedInfo.year&&(n.clsName="dtp-current-day"),a.dateArray.push(n)}},DatePicker.prototype.currentDate=function(){return this.forSetDate.getDate()},DatePicker.prototype.currentDay=function(){return this.forSetDate.getDay()},DatePicker.prototype.currentMonth=function(){return this.forSetDate.getMonth()},DatePicker.prototype.currentYear=function(){return this.forSetDate.getFullYear()},DatePicker.prototype.getCurrentMonthTotalDays=function(e,t){return new Date(e,t+1,0).getDate()},DatePicker.prototype.setDateMonthYear=function(e,t,r){this.forSetDate.setDate(r),this.forSetDate.setMonth(t),this.forSetDate.setFullYear(e)},DatePicker.prototype.setOnlyDate=function(e,t){this.forSetDate.setDate(e.innerHTML),this.config.target.value=this.forSetDate,this.config.callback&&this.config.callback(this.forSetDate),t&&t(this)},DatePicker.prototype.addDays=function(e){this.forSetDate.setDate(this.forSetDate.getDate()+e)},DatePicker.prototype.subtractDays=function(e){this.forSetDate.setDate(this.forSetDate.getDate()-e)},DatePicker.prototype.updateCurrentInfo=function(e){void 0!=e.date&&(this.currentInfo.date=e.date),void 0!=e.month&&(this.currentInfo.month=e.month),void 0!=e.year&&(this.currentInfo.year=e.year),this.setDateMonthYear(this.currentInfo.year,this.currentInfo.month,this.currentInfo.date)},DatePicker.prototype.isValidDate=function(e){var t=new Date;""!=e&&void 0!=e&&null!=e&&(t=new Date(e),"Invalid Date"==t&&(t=new Date)),this.selectedInfo={date:t.getDate(),month:t.getMonth(),year:t.getFullYear()},this.updateCurrentInfo(this.selectedInfo),this.updateDisplayView(!0,!1,!1),this.isLeftArrowEnabled=!0,this.isRightArrowEnabled=!0},DatePicker.prototype.updateDatePicker=function(e){e?11==this.currentInfo.month?this.updateCurrentInfo({month:0,year:this.currentInfo.year+1}):this.updateCurrentInfo({month:this.currentInfo.month+1}):0==this.currentInfo.month?this.updateCurrentInfo({month:11,year:this.currentInfo.year-1}):this.updateCurrentInfo({month:this.currentInfo.month-1}),this.renderDateView()},DatePicker.prototype.renderDateView=function(){this.setHeaderTitle(),document.getElementById("dtp_tablebody").innerHTML=this.createDatePickerBody().innerHTML,this.onClickDatePicker()},DatePicker.prototype.renderMonthView=function(){this.setHeaderTitle(),this.buildMonthViewBody()},DatePicker.prototype.onClickDatePicker=function(){for(var e=this,t=document.getElementsByClassName("dtp-current-month"),r=document.getElementsByClassName("dtp-current-day"),a=0;a<r.length;a++)r[a].addEventListener("click",function(){e.setOnlyDate(this,e.closeDatePicker)});for(var n=0;n<t.length;n++)t[n].addEventListener("click",function(){e.setOnlyDate(this,e.closeDatePicker)})},DatePicker.prototype.closeDatePicker=function(e){e.parentElement&&(e.parentElement.remove(),e.parentElement=null)},DatePicker.prototype.createElementDynamic=function(e,t){var r=document.createElement(e);for(var a in t)r.setAttribute(a,t[a]);return r},DatePicker.prototype.createTextNodeDynamic=function(e){var t=document.createTextNode(e);return t},DatePicker.prototype.positionDatePickerStyle=function(e){e.style.left=this.config.target.offsetLeft+this.config.target.offsetWidth+"px",e.style.top=this.config.target.offsetTop+"px"},DatePicker.prototype.validateMinMaxDate=function(){this.currentInfo.year>=this.maxYear&&this.currentInfo.month==this.minMaxMonth?(document.getElementById("dtp_header_right_arrow").setAttribute("class","dtp_header_rightarrow dtp-disable-arrow"),this.isRightArrowEnabled=!1):this.isRightArrowEnabled||(this.isRightArrowEnabled=!0,document.getElementById("dtp_header_right_arrow").setAttribute("class","dtp_header_rightarrow")),this.currentInfo.year<=this.minYear&&this.currentInfo.month==this.minMaxMonth?(document.getElementById("dtp_header_left_arrow").setAttribute("class","dtp_header_leftarrow dtp-disable-arrow"),this.isLeftArrowEnabled=!1):this.isLeftArrowEnabled||(this.isLeftArrowEnabled=!0,document.getElementById("dtp_header_left_arrow").setAttribute("class","dtp_header_leftarrow")),(this.displayView.month||this.displayView.year)&&(this.currentInfo.year>=this.maxYear?(document.getElementById("dtp_header_right_arrow").setAttribute("class","dtp_header_rightarrow dtp-disable-arrow"),this.isRightArrowEnabled=!1):this.isRightArrowEnabled||(this.isRightArrowEnabled=!0,document.getElementById("dtp_header_right_arrow").setAttribute("class","dtp_header_rightarrow")),this.currentInfo.year<=this.minYear?(document.getElementById("dtp_header_left_arrow").setAttribute("class","dtp_header_leftarrow dtp-disable-arrow"),this.isLeftArrowEnabled=!1):this.isLeftArrowEnabled||(this.isLeftArrowEnabled=!0,document.getElementById("dtp_header_left_arrow").setAttribute("class","dtp_header_leftarrow")))},DatePicker.prototype.appendMonthYearHtml=function(e){var t=e.innerHTML.split(" ");2==t.length?(this.updateDisplayView(!1,!0,!1),this.buildMonthViewBody()):1==t.length&&(this.updateDisplayView(!1,!1,!0),this.buildYearViewContent(this.currentYear())),this.validateMinMaxDate(),this.setHeaderTitle(),this.showTableHeader(!1)},DatePicker.prototype.updateDisplayView=function(e,t,r){this.displayView.day=e,this.displayView.month=t,this.displayView.year=r},DatePicker.prototype.buildMonthViewBody=function(){for(var e=this,t=this.createElementDynamic("tbody"),r=this.months.length,a=null,n=0;r>n;n++){var i=e.months[n],o=e.createElementDynamic("td",{"class":"bb-dtp-month"});n==e.selectedInfo.month&&e.selectedInfo.year==e.currentInfo.year&&(o=e.createElementDynamic("td",{"class":"bb-dtp-month bb-current-month-selected"})),(e.maxYear==e.currentInfo.year&&n>e.minMaxMonth||e.minYear==e.currentInfo.year&&n<e.minMaxMonth)&&(o=e.createElementDynamic("td",{"class":"bb-dtp-month-disable"})),o.setAttribute("data-month",n);var s=e.createTextNodeDynamic(i);o.appendChild(s),n%3==0&&(a=e.createElementDynamic("tr")),a.appendChild(o),(n+1)%3==0&&t.appendChild(a)}document.getElementById("dtp_tablebody").innerHTML=t.innerHTML,this.addEventListenerDynamicMonth()},DatePicker.prototype.buildYearViewContent=function(){for(var e=this,t=this.createElementDynamic("tbody"),r=this.currentYear(),a=null,n=0;16>n;n++){var i=(e.months[n],e.createElementDynamic("td",{"class":"bb-dtp-year"}));r+n==e.selectedInfo.year&&(i=e.createElementDynamic("td",{"class":"bb-dtp-year bb-current-year-selected"})),(r+n>e.maxYear||r+n<e.minYear)&&(i=e.createElementDynamic("td",{"class":"bb-dtp-year-disable"})),i.setAttribute("data-year",r+n);var o=e.createTextNodeDynamic(r+n);i.appendChild(o),n%4==0&&(a=e.createElementDynamic("tr")),a.appendChild(i),(n+1)%4==0&&t.appendChild(a)}document.getElementById("dtp_tablebody").innerHTML=t.innerHTML,this.addEventListenerDynamicYear()},DatePicker.prototype.showTableHeader=function(e){var t=document.getElementsByClassName("datepicker_parent_container");if(t.length>0){var r=t[0].getElementsByTagName("thead");e?r[0].style.display="":r[0].style.display="none"}},DatePicker.prototype.setHeaderTitle=function(e){var t=this,r=e||document.getElementById("dtp_container_title");r.innerHTML=null;var a=this.createElementDynamic("span",{}),n=this.fullMonths[this.currentMonth()]+" "+this.currentYear();this.displayView.month?n=this.currentYear():this.displayView.year&&(n=this.currentYear()+"-"+(this.currentYear()+15)),a.appendChild(this.createTextNodeDynamic(n)),this.displayView.year||a.addEventListener("click",function(e){t.appendMonthYearHtml(this)}),r.appendChild(a)},DatePicker.prototype.addEventListenerDynamicMonth=function(){for(var e=this,t=document.getElementsByClassName("bb-dtp-month"),r=0;r<t.length;r++)t[r].addEventListener("click",function(){e.updateCurrentInfo({month:Number(this.getAttribute("data-month"))}),e.updateDisplayView(!0,!1,!1),e.renderDateView(),e.validateMinMaxDate(),e.showTableHeader(!0)})},DatePicker.prototype.addEventListenerDynamicYear=function(){for(var e=this,t=document.getElementsByClassName("bb-dtp-year"),r=0;r<t.length;r++)t[r].addEventListener("click",function(){e.updateCurrentInfo({year:Number(this.getAttribute("data-year"))}),e.updateDisplayView(!1,!0,!1),e.renderMonthView(),e.validateMinMaxDate(),e.showTableHeader(!1)})},document.body.addEventListener("keyup",function(e){if(27==e.keyCode)for(var t=document.getElementsByClassName("datepicker_parent_container"),r=0;r<t.length;r++)t[r].remove()}),document.body.addEventListener("click",function(e){})}();